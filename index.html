<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <style media="screen"></style>
  </head>
  <body>
    <div id="dragalert" style="display: none;">DRAGGING!</div>
    <div id="draggable" style="display: none;" draggable="true" ondragstart="event.dataTransfer.setData('text/plain',null)">DRAG ME ON PHONE</div> 
    </div>

    <script type="text/javascript">
      $(document).ready(function() {
        var socket = io();
        var client = Math.random() + Date.now();
        var mobile = (typeof window.orientation) !== "undefined";
        var dragged;

        if (mobile) {
          $('#draggable').show();
        }

        document.addEventListener("dragstart", function( event ) {
            dragged = event.target;
            event.target.style.opacity = .5;
            socket.emit('drags', {client: client});
        }, false);

        document.addEventListener("dragend", function( event ) {
            event.target.style.opacity = "";
            socket.emit('drage', {client: client});
        }, false);

        socket.on('drags', function(coords) {
          if (coords.client != client) {
            $('#dragalert').show();
          }
        });

        socket.on('drage', function(coords) {
          if (coords.client != client) {
            $('#dragalert').hide();
          }
        });

      });
    </script>
  </body>
</html>
